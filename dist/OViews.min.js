/*! OViews - v0.2.0 - 2012-07-10
* https://github.com/phated/oviews
* Copyright (c) 2012 Blaine Bublitz; Licensed MIT */
define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/store/Memory","dojo/store/Observable","dojo/dom-construct","dojo/query","dojo/NodeList-manipulate","dojo/NodeList-traverse"],function(a,b,c,d,e,f,g){return a(null,{initialData:null,parentElement:null,selector:null,model:null,view:null,idProperty:"id",modelQuery:{},_template:null,_observableHandler:null,_renderedTemplate:null,constructor:function(b){a.safeMixin(this,b),this._create()},_render:function(a,b,c){var d,e;this._renderedTemplate=this._template(a),this.parentElement&&(b>-1&&c>-1?(d=this.parentElement.children()[c],f.place(this._renderedTemplate,d,"replace")):(b>-1&&(e=this.parentElement.children()[b],f.destroy(e)),c>-1&&this.parentElement.forEach(function(a){f.place(this._renderedTemplate,a,c)},this)))},_create:function(){var a,c;this._template=b.hitch(this,this.view),!this.parentElement&&this.selector&&(this.parentElement=g(this.selector)),a=new d({data:this.initialData,idProperty:this.idProperty}),this.model=e(a),c=this.model.query(this.modelQuery),this._render=b.hitch(this,this._render),this._observableHandler=c.observe(this._render,!0),this._initialRender()},_initialRender:function(){var a;this.parentElement&&(a=this.model.query({}),c.forEach(a,function(a,b){this._render(a,-1,b)},this))}})});